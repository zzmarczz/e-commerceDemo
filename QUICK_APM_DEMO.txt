â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          APM DEMO: Slow Response Time Simulation                  â•‘
â•‘                    Quick Reference Guide                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ PURPOSE
â”€â”€â”€â”€â”€â”€â”€â”€â”€
Showcase your APM tool's ability to detect and visualize slow response 
times by artificially slowing down the /api/orders endpoint.


ğŸ“¦ WHAT WAS CREATED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. OrderController.java (Modified)
   âœ… Added slow mode toggle (enable/disable)
   âœ… Configurable delay (default 5 seconds)
   âœ… Control endpoints for API access

2. demo-slow-orders.sh (NEW)
   âœ… Enable/disable slow mode
   âœ… Check status
   âœ… Test response times
   âœ… Custom delay configuration

3. generate-slow-load.sh (NEW)
   âœ… Generate mixed fast/slow traffic
   âœ… 40% slow requests (orders)
   âœ… 60% fast requests (products)
   âœ… Real-time response time feedback

4. APM_SLOW_DEMO.md (NEW)
   âœ… Complete documentation
   âœ… Demo script for presentations
   âœ… Expected metrics
   âœ… APM tool integration tips


ğŸš€ QUICK START (ON AWS EC2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Update and rebuild:
   
   cd ~/e-commerceDemo
   git pull
   ./quick-update.sh

   Wait 60 seconds for services to start.


2. Enable slow mode:
   
   ./demo-slow-orders.sh enable

   Expected output:
   ğŸŒ SLOW MODE ACTIVATED - /api/orders will be delayed by 5000ms


3. Generate load:
   
   ./generate-slow-load.sh

   This runs continuously. Press Ctrl+C to stop.
   You'll see:
   - âš¡ Fast requests (products): ~50ms
   - ğŸŒ Slow requests (orders): ~5000ms


4. Watch your APM dashboard for:
   
   âœ“ Response time graph showing spikes
   âœ“ Slow transactions highlighted in red/orange
   âœ“ Order service marked as bottleneck
   âœ“ Individual traces showing 5s delay


5. Disable when done:
   
   ./demo-slow-orders.sh disable

   Expected output:
   âœ… SLOW MODE DEACTIVATED - Normal response times restored


ğŸ“Š MANUAL TESTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Test individual endpoints:

# Fast endpoint (should return in <100ms)
time curl http://localhost:8080/api/products

# Slow endpoint (should return in ~5000ms)
time curl http://localhost:8080/api/orders


ğŸ’¡ ADVANCED USAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Custom delay times:

  ./demo-slow-orders.sh enable 2000   # 2 second delay
  ./demo-slow-orders.sh enable 10000  # 10 second delay
  ./demo-slow-orders.sh enable 30000  # 30 second delay (extreme!)

Generate load for specific duration:

  ./generate-slow-load.sh 120  # Run for 2 minutes
  ./generate-slow-load.sh 600  # Run for 10 minutes

Check status:

  ./demo-slow-orders.sh status

Test response time:

  ./demo-slow-orders.sh test


ğŸ¬ DEMO SCRIPT FOR PRESENTATIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Baseline (1 minute):
   Show everything is healthy with normal response times
   
   ./generate-slow-load.sh 60

2. Introduce problem:
   "Uh oh, users are reporting slow checkout times..."
   
   ./demo-slow-orders.sh enable

3. Generate load (3 minutes):
   Show APM detecting the issue
   
   ./generate-slow-load.sh 180
   
   Point out in APM:
   - Response time spike to 5+ seconds
   - APM automatically detected slow transactions
   - Service bottleneck clearly identified
   - Transaction trace shows time in getAllOrders()

4. Resolution:
   "After fixing the issue, response times return to normal"
   
   ./demo-slow-orders.sh disable
   
   Point out:
   - APM confirms fix
   - Back to normal <100ms response times


ğŸ”§ CONTROL VIA API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Enable slow mode:
  curl -X POST "http://localhost:8083/api/orders/control/slow-mode?enabled=true&delayMs=5000"

Disable slow mode:
  curl -X POST "http://localhost:8083/api/orders/control/slow-mode?enabled=false"

Check status:
  curl http://localhost:8083/api/orders/control/slow-mode

Response example:
  {
    "slowModeEnabled": true,
    "delayMs": 5000,
    "message": "ğŸŒ SLOW MODE ACTIVATED - /api/orders will be delayed by 5000ms"
  }


ğŸ“ˆ EXPECTED METRICS IN APM
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

NORMAL MODE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Endpoint     â”‚ Avg     â”‚ P95  â”‚ P99  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ /products    â”‚  30ms   â”‚ 80ms â”‚ 100msâ”‚
â”‚ /orders      â”‚  30ms   â”‚ 80ms â”‚ 100msâ”‚
â”‚ /cart/*      â”‚  40ms   â”‚100ms â”‚ 150msâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

SLOW MODE (5s delay):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Endpoint     â”‚ Avg     â”‚ P95  â”‚ P99  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ /products    â”‚  30ms   â”‚ 80ms â”‚ 100msâ”‚
â”‚ /orders      â”‚ 5030ms  â”‚ 5100msâ”‚5200msâ”‚ â† SPIKE!
â”‚ /cart/*      â”‚  40ms   â”‚100ms â”‚ 150msâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜


ğŸ› ï¸ TROUBLESHOOTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Slow mode not working?

1. Check services are running:
   ./check-services.sh

2. Verify slow mode is enabled:
   ./demo-slow-orders.sh status

3. Check order service logs:
   tail -f logs/order-service.log | grep "SLOW MODE"
   
   Should show:
   ğŸŒ SLOW MODE: Delaying response by 5000ms for APM demo

4. Make sure you rebuilt after git pull:
   cd order-service
   mvn clean package -DskipTests
   cd ..
   ./stop-all.sh
   ./start-with-ui.sh


APM not showing slow transactions?

1. Verify requests are going through:
   tail -f logs/api-gateway.log

2. Check APM agent is running and configured

3. Ensure APM agent instruments Spring Boot applications

4. Check APM service map and transaction views


ğŸ“š FULL DOCUMENTATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For complete details, see:
  APM_SLOW_DEMO.md        - Full slow mode documentation
  APM_MONITORING.md       - APM tool setup guide
  LOAD_GENERATOR_README.md - Load generator details
  README.md               - Main project documentation


âœ¨ WHAT THIS DEMONSTRATES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Real-time performance monitoring
âœ“ Slow transaction detection
âœ“ Service bottleneck identification
âœ“ Response time spike visualization
âœ“ Transaction tracing capabilities
âœ“ Performance baseline vs degradation
âœ“ Alert configuration for slow endpoints


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

GitHub: https://github.com/zzmarczz/e-commerceDemo.git

All changes are committed and pushed! ğŸš€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


